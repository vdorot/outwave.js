!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Outwave=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};a[g][0].call(j.exports,function(b){var c=a[g][1][b];return e(c?c:b)},j,j.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=function(a,b,c){var d=$('<div class="controls"></div>'),e=c.zoomInControl(),f=c.zoomOutControl(),g=c.lockPositionControl(),h=c.channelsControl();if(d.append(e,f),b.options.autoScroll&&d.append(g),b.getDataFile().getChannelCnt()>1&&(d.append(h),h.addClass("left-3"),g.addClass("left-4")),a.prepend(d),c.vertical()){var i=b.timelineHeight();d.css("left",i)}var j=e;e.find("a").length&&(e=e.find("a"));var k=f;f.find("a").length&&(f=f.find("a")),g.find("a").length&&(g=g.find("a")),h.find("a").length&&(h=h.find("a")),e.click(function(a){a.preventDefault(),b.zoomIn()}),f.click(function(a){a.preventDefault(),b.zoomOut()}),b.onZoomed(function(a){j.add(k).removeClass("disabled"),b.options.maxZoom===a&&j.addClass("disabled"),b.options.minZoom===a&&k.addClass("disabled")});var l="Mix channels to mono",m="Show all channels";b.options.mono?h.attr("title",m).addClass("mono"):h.attr("title",l),h.click(function(a){a.preventDefault(),$(this).hasClass("mono")?($(this).removeClass("mono").attr("title",l),b.setMono(!1)):($(this).addClass("mono").attr("title",m),b.setMono(!0))});var n="Autoscroll enabled";g.click(function(a){a.preventDefault(),$(this).hasClass("locked")?($(this).attr("title",n),b.setScrollLocked(!1)):($(this).attr("title","Position locked"),b.setScrollLocked(!0)),$(this).toggleClass("locked")}),g.attr("title",n),d.children().on("mouseenter",function(){b.handleMouseEnter()}),d.children().on("mouseleave",function(){b.handleMouseLeave()})};b.exports=c},{}],2:[function(a,b){var c=(a("./vendor/jdataview"),function(a,b){this.data=a;var c=0;this.version=a.getUint8(c),c++,this.channels=a.getUint8(c),c++,this.sampleSize=a.getUint8(c),c+=1,this.sampleRate=a.getUint32(c,!1),c+=4,this.summary1,this.summary2,2==this.version&&(this.summary1=a.getUint8(c,!1),c+=1,this.summary2=a.getUint8(c,!1),c+=1,this.sum1p=Math.pow(2,this.summary1),this.sum2p=Math.pow(2,this.summary2)),this.headerLen=c,this.frames=1==this.version?Math.floor((b-this.headerLen)/(this._getChannelCnt()*this.getSampleSize()*2)):a.getUint32(b-4),this.byteLen=b,this.mono,this.sampleSource,this.setMono(!1)});c.prototype={setMono:function(a){void 0===a&&(a=!0),this.mono=a,this.sampleSource=this.mono?this.getRawSampleMono:this.getRawSample},getVersion:function(){return this.version},getChannelCnt:function(){return this.mono?1:this.channels},_getChannelCnt:function(){return this.channels},getSampleSize:function(){return this.sampleSize},getSampleRate:function(){return this.sampleRate},getFrameCnt:function(){return this.frames},getLength:function(){return this.getFrameCnt()/this.getSampleRate()},px2time:function(a,b){if(!b)throw new Error;return a/this.getSampleRate()*b},time2px:function(a,b){if(!b)throw new Error;return Math.floor(a*this.getSampleRate()/b)},sampleStart:function(a,b){return Math.floor(a*b)},sampleEnd:function(a,b){return Math.min(Math.ceil((a+1)*b-1),this.getFrameCnt()-1)},getSum1Sample:function(a,b){var c=(a+1)*(this.sum1p+1)-1+((a+1)*this.sum1p-1>>this.summary2);return this.sampleSource(c,b)},getSum2Sample:function(a,b){var c=(a+1)*(this.sum2p+1)-1+((a+1)*this.sum2p>>this.summary1);return this.sampleSource(c,b)},getNoSumSample:function(a,b){return this.sampleSource(a+(a>>this.summary1)+(a>>this.summary2),b)},getRawSample:function(a,b){var c,d,e=this.headerLen+a*this._getChannelCnt()*this.getSampleSize()*2+b*this.getSampleSize()*2;if(2==this.getSampleSize()){if(e>this.byteLen||e+2>this.byteLen)return[0,0];c=this.data.getInt16(e)/65535,d=this.data.getInt16(e+2)/65535}else{if(e>this.byteLen||e+1>this.byteLen)return[0,0];c=this.data.getInt8(e)/128,d=this.data.getInt8(e+1)/128}return[c,d]},getRawSampleMono:function(a){var b,c=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY;for(b=0;b<this._getChannelCnt();b++){var e=this.getRawSample(a,b);c=Math.min(c,e[0]),d=Math.max(d,e[1])}return[c,d]},getSample:function(a,b,c){var d,e,f,g,h;if(2!=this.version)for(d=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,f=this.sampleStart(a,c),g=this.sampleEnd(a,c),sample=f;g>=sample;sample++)h=this.sampleSource(sample,b),d=Math.min(d,h[0]),e=Math.max(e,h[1]);else if(c>2*this.sum2p)for(d=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,f=Math.floor(this.sampleStart(a,c)/this.sum2p),g=Math.ceil(this.sampleEnd(a,c)/this.sum2p),g=Math.min(g,Math.floor(this.frames/this.sum2p)),sample=f;g>=sample;sample++)h=this.getSum2Sample(sample,b),d=Math.min(d,h[0]),e=Math.max(e,h[1]);else if(c>2*this.sum1p)for(d=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,f=Math.floor(this.sampleStart(a,c)/this.sum1p),g=Math.ceil(this.sampleEnd(a,c)/this.sum1p),g=Math.min(g,Math.floor(this.frames/this.sum1p)),sample=f;g>=sample;sample++)h=this.getSum1Sample(sample,b),d=Math.min(d,h[0]),e=Math.max(e,h[1]);else for(d=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,f=this.sampleStart(a,c),g=this.sampleEnd(a,c),sample=f;g>=sample;sample++)h=this.getNoSumSample(sample,b),d=Math.min(d,h[0]),e=Math.max(e,h[1]);return[d,e]}},c.loadUrl=function(a,b,d){var e=new XMLHttpRequest;e.open("GET",a,!0),"responseType"in e?e.responseType="arraybuffer":"overrideMimeType"in e?e.overrideMimeType("text/plain; charset=x-user-defined"):e.setRequestHeader("Accept-Charset","x-user-defined"),e.onprogress=function(a){a.total&&a.loaded&&d(Math.floor(a.loaded/a.total*100))},e.onload=function(){if(!(this.status>=200&&this.status<300||304===this.status))return void b(!1,this.status+" "+this.statusText);if(!("response"in this)){var a=new VBArray(this.responseBody).toArray();this.response="";for(var d=0;d<a.length;d++)this.response+=String.fromCharCode(a[d])}var e,f;if(this.response.constructor==ArrayBuffer)e=new DataView(this.response),f=this.response.byteLength;else{if("undefined"==typeof jDataView)return void b(!1,"jDataView not found");e=new jDataView(this.response),f=e.byteLength}var g=new c(e,f);b(!0,null,g)},e.send()},b.exports=c},{"./vendor/jdataview":16}],3:[function(a,b){var c=a("./data-file"),d=a("./viewer"),e=a("./segment-collection"),f=a("./segment"),g=a("./style"),h=a("./utils"),i=a("./controls"),j=a("./time-span/time-span"),k=a("./time-span/sparse-time-span"),l=a("./time-span/continuous-time-span"),m=a("./time-span/draggable"),n=a("./time-span/time-span-collection"),o=a("./time-span/sparse-time-span-collection"),p=a("./time-span/continuous-time-span-collection"),q={DataFile:c,Viewer:d,SegmentCollection:e,Segment:f,Style:g,utils:h,Controls:i,timeSpans:{TimeSpan:j,SparseTimeSpan:k,ContinuousTimeSpan:l,Draggable:m,TimeSpanCollection:n,SparseTimeSpanCollection:o,ContinuousTimeSpanCollection:p}},r={height:null,segmentWidth:500,hover:!0,mono:!1,minZoom:null,maxZoom:null,zoom:50,hideScrollbar:!1,autoScroll:!0,autoScrollType:"jumpy-animated",autoScrollTarget:.2,autoScrollThreshold:.9,autoScrollAnimationDuration:400,autoScrollTimeout:800,autoScrollMouseLock:!0,zoomChangeFactor:2,cacheOffset:!1,init:null},s=function(a,b,e,f){b=$(b),e=$.extend({},r,e);var j=new g;e.style=e.style?$.extend({},j,e.style):j;var k=$('<div class="outwave"></div>'),l=k;if(e.hideScrollbar){var m=$('<div class="scrollbar-hiding-wrapper"></div>').css({width:"100%",height:"100%",overflow:"hidden"});m.append(k),l=m}if(b.append(l),e.hideScrollbar){var n;e.style.horizontal()?(n=h.getScrollbarDim().height,k.css("height",l.height()+n)):(n=h.getScrollbarDim().width,k.css("width",l.width()+n))}b=k,b.addClass(e.style.vertical()?"vertical":"horizontal");var o=function(a){b.empty().append(e.style.error(a))};b.empty().append(e.style.loading());var p=function(a){b.find(".loading").text(a+"% ")};c.loadUrl(a,function(a,c,g){if(!a)return void o(c);var h=new d(b,g,e);i(b,h,e.style);var j=function(){f(h)};e.init?e.init.call(h,j):j()},p)};s.api=q,b.exports=s},{"./controls":1,"./data-file":2,"./segment":5,"./segment-collection":4,"./style":6,"./time-span/continuous-time-span":8,"./time-span/continuous-time-span-collection":7,"./time-span/draggable":9,"./time-span/sparse-time-span":11,"./time-span/sparse-time-span-collection":10,"./time-span/time-span":14,"./time-span/time-span-collection":12,"./utils":15,"./viewer":18}],4:[function(a,b){var c=function(a,b,c,d,e){this.container=jQuery(b),this.container.empty(),this.viewportLength,this.segmentFactory=c,this.dataFile=a,this.segmentWidth=d,this.segmentCnt=null,this.zoom=1;this.segments=[],this.cursorTime=null,this.cursorTime=0,this.position=null,this.scrollPos=0,this.style=e};c.prototype={updateDimensions:function(){this.segmentCnt=Math.ceil(this.dataFile.getFrameCnt()/this.zoom/this.segmentWidth),this.containerLength=Math.floor(this.dataFile.getFrameCnt()/this.zoom),this.style.horizontal()?this.container.width(this.containerLength):this.container.height(this.containerLength)},setCursorX:function(a){a?this.setCursor(this.dataFile.px2time(a,zoom)):this.removeCursor()},setViewportLength:function(a){this.viewportLength=a,this.updateDimensions()},setCursor:function(a){if(null===a||a===!1)return this.removeCursor();if(this.cursorTime!=a){this.cursorTime=a;for(var b=0;b<this.segments.length;b++)this.segments[b].setCursor(this.dataFile.time2px(a,this.zoom))}},removeCursor:function(){if(this.cursorTime)for(var a=0;a<this.segments.length;a++)this.segments[a].setCursor(null);this.cursorTime=null},setZoom:function(a){this.zoom=a,this.updateDimensions(),this.rebuild()},scrollTo:function(a){this.scrollPos=a,this.updateSegments()},getAvailableSegment:function(){for(var a=0;a<this.segments.length;a++)if(this.segments[a].recycled())return this.segments[a]},createSegment:function(){var a=this.segmentFactory(this.container);return this.segments.push(a),a},rebuild:function(){this.segments=[],this.container.empty(),this.updateSegments()},ensureSegment:function(a){for(var b=!1,c=0;c<this.segments.length;c++)if(this.segments[c].getPos()==a*this.segmentWidth&&!this.segments[c].recycled()){b=!0;break}if(!b){var d=this.getAvailableSegment();d||(d=this.createSegment());var e=Math.min(this.containerLength-a*this.segmentWidth,this.segmentWidth),f=this.dataFile.time2px(this.cursorTime,this.zoom);d.setZoom(this.zoom),d.setCursor(f),d.setPosWidth(a*this.segmentWidth,e)}},updateSegments:function(){if(!this.viewportLength){var a=new Error("Viewport length undefined, call setViewportLength before updateSegments");throw a.name="InvalidState",a}var b=this.scrollPos-this.viewportLength,c=this.scrollPos+2*this.viewportLength,d=Math.floor(b/this.segmentWidth),e=Math.ceil(c/this.segmentWidth);d=Math.max(d,0),e=Math.min(e,this.segmentCnt-1);for(var f=d*this.segmentWidth,g=e*this.segmentWidth,h=0;h<this.segments.length;h++)(this.segments[h].getPos()<f||this.segments[h].getPos()>g)&&this.segments[h].recycle();for(var h=d;e>=h;h++)this.ensureSegment(h);this.segments.sort(function(a,b){return a.getPos()-b.getPos()}),this.render()},render:function(){var a,b,c=this,d=function(){c.render()};for(a=0;a<this.segments.length;a++)if(b=this.segments[a],!b.recycled()&&!b.rendering()&&!b.rendered()&&b.getPos()>=this.scrollPos&&b.getPos()<=this.scrollPos+this.viewportLength)return void this.segments[a].render(d);for(a=0;a<this.segments.length;a++)if(b=this.segments[a],!b.recycled()&&!b.rendering()&&!b.rendered())return void this.segments[a].render(d)}},b.exports=c},{}],5:[function(a,b){var c=a("./utils"),d=function(a,b,c,d){this.style=d,this.isRendering=!1,this.renderingTimer,this.xPos=0,this.width=0,this.height=c,this.zoom=1,this.renderingXPos,this.renderingXEnd,this.isRecycled=!0,this.isRendered=!1,this.timelineMarkerFn=d.markerElement,this.container=jQuery(b),this.dataFile=a,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),d.horizontal()?($(this.canvas).attr({width:0,height:c}),this.timeline=$('<div class="timeline" style="position: absolute; border-top: 1px solid red; width: 100%;"></div>'),this.element=$('<div class="segment"></div>').css({position:"absolute",width:0,height:c})):($(this.canvas).attr({width:c,height:0}),this.timeline=$('<div class="timeline" style="position: absolute; border-top: 1px solid red; height: 100%;"></div>'),this.element=$('<div class="segment"></div>').css({position:"absolute",width:c,height:0})),this.element.append(this.timeline),this.element.append(this.canvas),this.container.append(this.element);var e=this.getTimelineInterval(),f=215999;1>e&&(f+=.999);var g=this.getTimelineMarkerElement();if("function"!=typeof g){var h=new Error("Timeline marker(set in style options) should be a function returning an element");throw h.name="InvalidOption",h}var i=g(f);if(i.css({position:"absolute"}),this.timeline.append(i),this.markerHeight=i.outerHeight(),this.markerWidth=i.outerWidth(),this.style.vertical()){var j=this.markerHeight;this.markerHeight=this.markerWidth,this.markerWidth=j}var k=d.horizontal()?{top:this.height-this.markerHeight}:{};this.timeline.empty().css(k),this.cursor=null};d.getTimelineHeight=function(a){var b=a.timelineMarker,d=215999,e=b(d,c.formatTime(d)),f=c.getElementDimensions(e);return a.horizontal()?f.h:f.w},d.prototype={setCursor:function(a){this.cursor;this.cursor=a,this.isRendered&&this.renderStyle()},hasXPos:function(a){return a>this.xPos&&a<this.xPos+this.width},getTimelineInterval:function(){for(var a=this.markerWidth,b=[.1,.2,.5,1,2,5,10,15,30,60,120,300,600,900,1800,3600,7200,10800,14400,21600,43200,86400],c=this.dataFile.px2time(a,this.zoom),d=null,e=0;e<b.length;e++)if(b[e]>c){d=b[e];break}return d||(d=b[b.length-1]),d},getTimelineMarkerElement:function(){return this.style.timelineMarker},updateTimeline:function(){this.timeline.empty();var a=this.getTimelineInterval(),b=this.dataFile.px2time(this.xPos,this.zoom),c=this.dataFile.px2time(this.xPos+this.width,this.zoom),d=Math.ceil(b/a)*a;for(0===d&&(d+=a);c>d;){var e=this.getTimelineMarkerElement(),f=$(e(d));this.timeline.append(f),f.css({position:"absolute"});var g=this.markerWidth,h=this.dataFile.time2px(d,this.zoom)-this.xPos-g/2,i=this.style.horizontal()?{left:h}:{top:h};f.css({position:"absolute"}).css(i),d+=a}},setZoom:function(a){this.zoom=a},setWidth:function(a){this.width=a,this.style.horizontal()?(this.element.css({width:a}),this.canvas.width!=a&&(this.canvas.width=a)):(this.element.css({height:a}),this.canvas.height!=a&&(this.canvas.height=a)),this.ctx=this.canvas.getContext("2d")},setPosWidth:function(a,b){$(this.element).show(),$(this.canvas).hide(),this.rendering&&this.stopRendering(),this.isRecycled=!1,this.xPos=a,this.setWidth(b),this.element.css(this.style.horizontal()?{left:a}:{top:a}),this.isRendered=!1,this.updateTimeline()},getPos:function(){return this.xPos},recycle:function(){this.cursor=null,$(this.element).hide(),this.isRecycled=!0,this.rendering&&this.stopRendering()},recycled:function(){return this.isRecycled},rendering:function(){return this.isRendering},rendered:function(){return this.isRendered},channelYRange:function(a){var b=Math.floor((this.height-this.markerHeight)/this.dataFile.getChannelCnt()),c=b*a,d=b*(a+1);return[c,d,b]},rotateCanvas:function(){this.ctx.rotate(Math.PI/2),this.ctx.translate(0,-this.height)},renderStyle:function(){this.ctx.globalCompositeOperation="source-atop",this.ctx.save(),this.style.vertical()&&this.rotateCanvas();var a=this.style.waveformFill;if("function"!=typeof a){var b=new Error("waveformFill(in options) should be a function returning a value that is applicable to canvas fillStyle");throw b.name="InvalidOption",b}for(var c=0;c<this.dataFile.getChannelCnt();c++){var d=this.channelYRange(c),e={x:0,y:d[0]},f={x:0,y:d[1]},g=c;if(this.style.vertical()&&(g=this.dataFile.getChannelCnt()-g-1),null!==this.cursor&&this.cursor>=this.xPos&&this.cursor<this.xPos+this.width)this.ctx.fillStyle=a(this.ctx,e,f,g,this.dataFile.getChannelCnt(),!0),this.ctx.fillRect(0,d[0],this.cursor-this.xPos,d[1]),this.ctx.fillStyle=a(this.ctx,e,f,g,this.dataFile.getChannelCnt(),!1),this.ctx.fillRect(this.cursor-this.xPos,d[0],this.width,d[1]);else{var h=this.cursor&&this.cursor>this.xPos;this.ctx.fillStyle=a(this.ctx,e,f,g,this.dataFile.getChannelCnt(),h),this.ctx.fillRect(0,d[0],this.width,d[1])}}this.ctx.restore(),this.ctx.globalCompositeOperation="source-over"},renderingFinished:function(){this.renderStyle(),this.isRendering=!1,this.isRendered=!0,$(this.canvas).show(),this.renderingDone&&this.renderingDone(!0)},stopRendering:function(){this.unschedule(),this.isRendering&&(this.isRendering=!1,this.renderingDone&&this.renderingDone(!1))},tyCoord:function(a,b){var c=Math.floor(this.height-this.markerHeight)/this.dataFile.getChannelCnt();return a=(-a+1)/2*c,c*b+a},txCoord:function(a){return a-this.xPos},renderPiece:function(){var a=this.renderingXPos,b=Math.ceil(20),c=Date.now();for(this.ctx.save(),this.style.vertical()&&this.rotateCanvas();a<this.renderingXEnd&Date.now()-c<b;){for(var d=0;d<this.dataFile.getChannelCnt();d++){var e=d;this.style.vertical()&&(e=this.dataFile.getChannelCnt()-e-1);var f=this.dataFile.getSample(a,e,this.zoom),g=this.ctx;g.beginPath();var h=this.tyCoord(f[0],d)+.5,i=this.tyCoord(f[1],d)+.5,j=this.txCoord(a)+.5,k=j;h==i&&(k+=1),g.moveTo(j,h),g.lineTo(k,i),g.stroke()}a++}this.ctx.restore(),this.renderingXPos=a,this.renderingXPos<this.renderingXEnd?this.scheduleRendering():this.renderingFinished()},render:function(a){this.isRendered=!1,this.renderingDone=a,this.style.horizontal()?this.ctx.clearRect(0,0,this.width,this.height):this.ctx.clearRect(0,0,this.height,this.width),this.ctx.strokeStyle="#ffffff",this.renderingXPos=this.xPos,this.renderingXEnd=this.xPos+this.width,this.isRendering=!0,$(this.canvas).hide(),this.scheduleRendering()},scheduleRendering:function(){var a=this;this.renderingTimer=setTimeout(function(){a.renderPiece()},0)},unschedule:function(){this.renderingTimer&&clearTimeout(this.renderingTimer)},destroy:function(){this.element&&this.element.remove(),this.rendering&&this.unschedule()}},b.exports=d},{"./utils":15}],6:[function(a,b){var c=a("./utils"),d=function(){return this.orientation="horizontal",this.horizontal=function(){return"horizontal"==this.orientation},this.vertical=function(){return"horizontal"!==this.orientation},this.timelineMarker=function(a){var b=$("<span></span>").text(c.formatTime(a));return $('<div class="timeline-marker"></div>').append(b)},this.cursor=function(){return $('<div class="cursor"></div>')},this.hover=function(){return $('<div class="hover"></div>')},this.timeSpanStart=function(){return $('<div class="timespan-start"></div>')},this.timeSpanEnd=function(){return $('<div class="timespan-end"></div>')},this.timeSpanBackground=function(){return $('<div class="timespan-back"><div></div></div>')},this.waveformFill=function(a,b,c,d,e,f){var g=a.createLinearGradient(b.x,b.y,c.x,c.y);return f?0===d?(g.addColorStop(0,"#8CDFFF"),g.addColorStop(1,"#17C0FF")):(g.addColorStop(0,"#C3FF87"),g.addColorStop(1,"#77ED00")):0===d?(g.addColorStop(0,"#6ED7FF"),g.addColorStop(1,"#0084B5")):(g.addColorStop(0,"#B0FF61"),g.addColorStop(1,"#57AD00")),g},this.error=function(a){return $('<div class="center"></div>').append($('<div class="centerm">').append($('<div class="error"></div>').text(a)))},this.loading=function(){return $('<div class="center"></div>').append($('<div class="centerm">').append($('<div class="loading"></div>')))},this.zoomInControl=function(){return $('<div class="control zoom-in"><a title="Zoom In" href="#">+</a>')},this.zoomOutControl=function(){return $('<div class="control zoom-out"><a title="Zoom Out" href="#">-</a>')},this.lockPositionControl=function(){return $('<div class="control lock-position"><a href="#">Lock position</a>')},this.channelsControl=function(){return $('<div class="control channels"><a href="#">Channels</a>')},this};b.exports=d},{"./utils":15}],7:[function(a,b){var c=a("./time-span-collection"),d=a("./continuous-time-span"),e=function(a,b){var e=new c(a,b);return e.spanFactory=function(){var a=new d(this,this.dataFile,this.backgroundContainer,this.foregroundContainer,this.style);return a},e.addTimeSpan=function(a){if(0>a||a>this.dataFile.getLength()){var b=new Error("Invalid end time");throw b.name="TimeSpanError",b}var c=this.createSpan();if(this.timespans.length){var d=this.timespans[this.timespans.length-1];if(a<d.getEnd()){var b=new Error("Time spans would overlap");throw b.name="TimeSpanError",b}c.setStart(d.getEnd()),c.setEnd(a),c.setPrev(d),c.setNext(null),d.setNext(c)}else c.setStart(0),c.setEnd(a),c.setPrev(null),c.setNext(null);return this.timespans.splice(this.timespans.length,0,c),c.setZoom(this.zoom),this.batchLoading||c.render(),this.timeSpanCreatedFn&&this.timeSpanCreatedFn(c),c},e.removeTimeSpan=function(a){var b;for(b in this.timespans)if(this.timespans[b]==a){null!==a.getPrev()&&a.getPrev().setNext(a.getNext()),null!==a.getNext()&&(a.getNext().setPrev(a.getPrev()),a.getNext().setStart(a.getStart())),a.handleRemoved(),a.handleDestroyed(),this.timespans.splice(b,1);break}},e};b.exports=e},{"./continuous-time-span":8,"./time-span-collection":12}],8:[function(a,b){var c=a("./time-span"),d=function(a,b,d,e,f){var g=new c(a,b,d,e,f),h=g.getStartLimits;g.getStartLimits=function(){var a=h.call(this);return this.getPrev()?a=this.intersectIntervals(a,{s:this.getPrev().getStart()+this.getPrev().getMinLength(),e:this.getEnd()}):null!==this.getStart()&&(a.s=a.e=this.getStart()),a};var i=g.getEndLimits;g.getEndLimits=function(){var a=i.call(this);return this.getNext()?a=this.intersectIntervals(a,{s:this.getStart(),e:this.getNext().getEnd()-this.getNext().getMinLength()}):null!==this.getEnd()&&(a.s=a.e=this.getEnd()),a};var j=g.setStart;g.setStart=function(a){var b=this.getStart();j.call(this,a),a!=b&&this.getPrev()&&this.getPrev().setEnd(a)};var k=g.setEnd;g.setEnd=function(a){prevTime=this.getEnd(),k.call(this,a),a!=prevTime&&this.getNext()&&this.getNext().setStart(a)};var l=g.setPrev;g.setPrev=function(a){l.call(this,a),this.getStartElement().addClass("continuous"),a?this.getStartElement().removeClass("first"):this.getStartElement().addClass("first")};var m=g.setNext;return g.setNext=function(a){m.call(this,a),this.getEndElement().addClass("continuous"),a?this.getEndElement().removeClass("last"):this.getEndElement().addClass("last")},g};b.exports=d},{"./time-span":14}],9:[function(a,b){var c=function(a,b,c){var d=b.getViewportElement(),e=function(){var a=this;this.scrollingSpeed=.5,this.setScrollingSpeed=function(a){this.scrollingSpeed=a},this.scrollCursorX,this.scrollCursorY,this.scrollTimer=null,this.tickPeriod=50,this.tickScroll=function(){var e=b.viewportOffset(),f=d.width(),g=d.height(),h=0;c.horizontal()?(a.scrollCursorX<e.left&&(h=a.scrollCursorX-e.left),a.scrollCursorX>e.left+f&&(h=a.scrollCursorX-(e.left+f)),h=h*a.scrollingSpeed*a.tickPeriod/1e3,d.scrollLeft(d.scrollLeft()+h)):(a.scrollCursorY<e.top&&(h=a.scrollCursorY-e.top),a.scrollCursorY>e.top+g&&(h=a.scrollCursorY-(e.left+g)),h=h*a.scrollingSpeed*a.tickPeriod/1e3,d.scrollTop(d.scrollTop()+h)),a.scrollTimer=setTimeout(a.tickScroll,a.tickPeriod)},this.startAutoScroll=function(){null===this.scrollTimer&&(this.scrollTimer=setTimeout(this.tickScroll,this.tickPeriod))},this.stopAutoScroll=function(){null!==this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=null},this.dragHandler=function(e,f){console.log("dragHandler"),e.preventDefault();var g,h=($(this).parent(),b.internalOffset());g=a.style.horizontal()?e.pageX-h.left:e.pageY-h.top,$("body").addClass(a.style.horizontal()?"drag-horizontal":"drag-vertical"),$("body").data("waveform-dragging",!0),b.setHoverDisplayed(!1);var i,j=null,k=function(d){d.event&&(d=$.event.fix(d),d.stopPropagation()),i={pageX:d.pageX,pageY:d.pageY},a.scrollCursorX=d.pageX,a.scrollCursorY=d.pageY;var e=b.internalOffset(),g=document.elementFromPoint(d.pageX-window.pageXOffset,d.pageY-window.pageYOffset);!g||a.foregroundContainer[0]!=g&&0===a.foregroundContainer.has(g).length?a.startAutoScroll():a.stopAutoScroll();var h;"undefined"==typeof d.pageX?h=a.style.horizontal()?j-e.left:j-e.top:a.style.horizontal()?(h=d.pageX-e.left,j=d.pageX):(h=d.pageY-e.top,j=d.pageY);var k,l=a.getStartDimensions(),m=a.getEndDimensions();k=c.horizontal()?l.w+m.w:l.h+l.h,k=a.dataFile.px2time(k,a.zoom);var n,o=a.dataFile.px2time(h,a.zoom);if(f){if(n=a.getStartLimits(),a.getPrev()&&a.getPrev().getStart()+k>n.s){var p=a.getPrev().getStart()+k;p<=n.e&&(n.s=p)}if(a.getEnd()-n.e<k){var p=a.getEnd()-k;p>=n.s&&(n.e=p)}}else{if(n=a.getEndLimits(),a.getNext()&&a.getNext().getEnd()-k<n.e){var p=a.getNext().getEnd()-k;p>=n.s&&(n.e=p)}if(n.s-a.getStart()<k){var p=a.getStart()+k;p<=n.e&&(n.s=p)}n.s>n.e&&(n.s=n.e)}return o=a.applyInterval(n,o),null!==o&&(f?a.setStart(o):a.setEnd(o)),!1};d.on("scroll.spandragging",function(){k(i)});var l=$(this).closest(".waveform-viewport");l.on("scroll.timeSpan",k),$(document)[0].addEventListener("mousemove",k,!0);var m=function(c){a.stopAutoScroll(),d.off("scroll.spandragging"),c=$.event.fix(c),c.stopPropagation(),$(document)[0].removeEventListener("mouseup",m,!0),$(document)[0].removeEventListener("mousemove",k,!0),$("body").removeClass("drag-horizontal").removeClass("drag-vertical"),l.off("scroll.timeSpan"),$("body").data("waveform-dragging",!1),b.setHoverDisplayed(!0)};$(document)[0].addEventListener("mouseup",m,!0)};var e=this.dragHandler;this.getStartElement().on("mousedown",function(a){e.call(this,a,!0)}),this.getEndElement().on("mousedown",function(a){e.call(this,a,!1)});var f=function(){$("body").data("waveform-dragging")||b.setHoverDisplayed(!1)},g=function(){$("body").data("waveform-dragging")||b.setHoverDisplayed(!0)};$(this.getStartElement()).on("mouseenter",f),$(this.getEndElement()).on("mouseenter",f),$(this.getStartElement()).on("mouseleave",g),$(this.getEndElement()).on("mouseleave",g)};e.call(a)};b.exports=c},{}],10:[function(a,b){var c=a("./time-span-collection"),d=a("./sparse-time-span"),e=function(a,b){var e=new c(a,b);return e.spanFactory=function(){var a=new d(this,this.dataFile,this.backgroundContainer,this.foregroundContainer,this.style);return a},e.addTimeSpan=function(a,b){for(var c=null,d=this.timespans.length-1;d>=0;d--){var e=this.timespans[d];if(e.getEnd()<=a){c=d;break}}var f=null,g=null;if(null!==c&&(f=this.timespans[c]),g=f?f.getNext():this.timespans.length?this.timespans[0]:null,g&&g.getStart()<b){var h=new Error("Time spans would overlap");throw h.name="TimeSpanError",h}var i,j=this.createSpan();return i=f?c+1:0,this.timespans.splice(i,0,j),j.setStart(a),j.setEnd(b),j.setPrev(f),j.setNext(g),f&&f.setNext(j),g&&g.setPrev(j),j.setZoom(this.zoom),j.render(),this.timeSpanCreatedFn&&this.timeSpanCreatedFn(j),j},e.removeTimeSpan=function(a){var b;for(b in this.timespans)if(this.timespans[b]==a){null!==a.getPrev()&&a.getPrev().setNext(a.getNext()),null!==a.getNext()&&a.getNext().setPrev(a.getPrev()),a.handleRemoved(),a.handleDestroyed(),this.timespans.splice(b,1);break}},e};b.exports=e},{"./sparse-time-span":11,"./time-span-collection":12}],11:[function(a,b){var c=a("./time-span"),d=function(a,b,d,e,f){var g=new c(a,b,d,e,f),h=g.getStartLimits;g.getStartLimits=function(){var a=h.call(this);return this.getPrev()&&(a=this.intersectIntervals(a,{s:this.getPrev().getEnd(),e:this.getEnd()})),a};var i=g.getEndLimits;return g.getEndLimits=function(){var a=i.call(this);return this.getNext()&&(a=this.intersectIntervals(a,{s:this.getStart(),e:this.getNext().getStart()})),a},g};b.exports=d},{"./time-span":14}],12:[function(a,b){var c=(a("./continuous-time-span"),a("./sparse-time-span"),a("./draggable")),d=a("./time-span-error"),e={minSpanLength:0},f=function(a,b){var d=this;this.viewer=a,this.options=$.extend({},e,b),this.zoom=1,this.dataFile=a.getDataFile();var f=a.getTimeSpanContainers();this.backgroundContainer=$('<div class="optimising-connector"></div>'),f.back.append(this.backgroundContainer),this.backgroundConnector=f.back,this.foregroundContainer=f.front,this.foregroundContainer=$('<div class="optimising-connector"></div>'),f.front.append(this.foregroundContainer),this.foregroundConnector=f.front,this.style=a.getStyle(),this.timespans=[],this.draggableMixin=function(a){return c(a,d.viewer,d.style),a.setScrollingSpeed(4),a},this.spanMixin=null,this.setZoom(a.getZoomFactor()),a.onZoomFactorChanged(function(a){d.setZoom(a)}),this.activeTimeSpan=null,this.BeforeBatchPositionChangeHnd=[],this.BatchPositionChangedHnd=[]};f.prototype={getAll:function(){return this.timespans},clear:function(){for(var a=0;a<this.timespans.length;a++)this.timespans[a].handleDestroyed();this.timespans=[]},spanFactory:function(){var a=new Error("spanFactory is an abstract method, please use a subclass instead");throw a.name="AbstractMethodException",a},createSpan:function(){var a=this.spanFactory();return a.setMinLength(this.options.minSpanLength),this.applySpanMixins(a),a},applySpanMixins:function(a){this.draggableMixin(a),this.spanMixin&&this.spanMixin(a)},mergeWithPrev:function(a){for(var b=null,c=this.timespans.length-1;c>=0;c--){var d=this.timespans[c];if(d==a){b=c;break}}if(null!==b&&null!==a.getPrev()){var e=a.getPrev();this.timespans.splice(b-1,2);var f=this.createSpan();e.getPrev()&&e.getPrev().setNext(f),f.setStart(e.getStart()),f.setEnd(a.getEnd()),f.setPrev(e.getPrev()),f.setNext(a.getNext()),a.getNext()&&a.getNext().setPrev(f),this.timespans.splice(b-1,0,f),f.setZoom(this.zoom),f.render(),this.timeSpanCreatedFn&&this.timeSpanCreatedFn(f),a.handleMerged(e,f),e.handleDestroyed(),a.handleDestroyed()}},getTimeSpanAtPosition:function(a){for(var b=this.timespans.length-1;b>=0;b--){var c=this.timespans[b];if(c.getStart()<=a&&c.getEnd()>=a)return this.timespans[b]}return null},split:function(a){for(var b=null,c=this.timespans.length-1;c>=0;c--){var e=this.timespans[c];e.getStart()<=a&&e.getEnd()>=a&&(b=c)}if(null!==b){var f=this.timespans[b];if(a-f.getStart()<this.options.minSpanLength||f.getEnd()-a<this.options.minSpanLength)throw new d("split","Cannot split annotations here, a time span would be shorter than minimum length");this.timespans.splice(b,1);var g=this.createSpan();g.setStart(f.getStart()),g.setEnd(a),g.setPrev(f.getPrev()),f.getPrev()&&f.getPrev().setNext(g);var h=this.createSpan();h.setStart(a),h.setEnd(f.getEnd()),h.setPrev(g),g.setNext(h),h.setNext(f.getNext()),f.getNext()&&f.getNext().setPrev(h),this.timespans.splice(b,0,g,h),g.setZoom(this.zoom),g.render(),h.setZoom(this.zoom),h.render(),this.timeSpanCreatedFn&&(this.timeSpanCreatedFn(g),this.timeSpanCreatedFn(h)),f.handleSplit(g,h),f.handleDestroyed()}},removeTimeSpan:function(){var a=new Error("removeTimeSpan is an abstract method, please use a subclass instead");throw a.name="AbstractMethodException",a},setZoom:function(a){this.zoom=a;var b;this.disconnectContainers(),this.handleBeforeBatchPositionChange();for(b in this.timespans)this.timespans[b].setZoom(this.zoom);this.handleBatchPositionChanged(),this.reconnectContainers()},onTimeSpanCreated:function(a){this.timeSpanCreatedFn=a},startBatch:function(){this.disconnectContainers()},cancelBatch:function(){this.reconnectContainers()},finishBatch:function(){this.reconnectContainers()},disconnectContainers:function(){this.foregroundContainer.detach(),this.backgroundContainer.detach()},reconnectContainers:function(){this.areContainersConnected()||(this.foregroundConnector.append(this.foregroundContainer),this.backgroundConnector.append(this.backgroundContainer))},areContainersConnected:function(){return this.foregroundContainer.parent().length>0},onBeforeBatchPositionChange:function(a){this.BeforeBatchPositionChangeHnd.push(a)},handleBeforeBatchPositionChange:function(){if(this.BeforeBatchPositionChangeHnd)for(var a in this.BeforeBatchPositionChangeHnd)this.BeforeBatchPositionChangeHnd[a]()
},onBatchPositionChanged:function(a){this.BatchPositionChangedHnd.push(a)},handleBatchPositionChanged:function(){if(this.BatchPositionChangedHnd)for(var a in this.BatchPositionChangedHnd)this.BatchPositionChangedHnd[a]()}},b.exports=f},{"./continuous-time-span":8,"./draggable":9,"./sparse-time-span":11,"./time-span-error":13}],13:[function(a,b){function c(a,b){this.name="TimeSpanError",this.message=b,this.type=a,this.getType=function(){return this.type}}c.prototype=new Error,c.prototype.constructor=c,b.exports=c},{}],14:[function(a,b){var c=a("../utils"),d=a("./time-span-error"),e=function(a,b,d,e,f){this.zoom=null,this.dataFile=b,this.collection=a,this.backgroundContainer=d,this.foregroundContainer=e,this.style=f,this.start=null,this.end=null,this.prev=null,this.next=null,this.rendered=!1,this.startEl,this.endEl,this.backEl,this.utils=c,this.splitFn=null,this.mergedFn=null,this.neighborChangedFn=null,this.minLength=0,this.data=null};e.prototype={getCollection:function(){return this.collection},setData:function(a){this.data=a},getData:function(){return this.data},onSplit:function(a){this.splitFn=a},handleSplit:function(a,b){this.splitFn&&this.splitFn(a,b)},onMerged:function(a){this.mergedFn=a},handleMerged:function(a,b){this.mergedFn&&this.mergedFn(a,b)},getMinLength:function(){return this.minLength},setMinLength:function(a){this.minLength=a},setPrev:function(a){this.prev=a,this.neighborChangedFn&&this.neighborChangedFn()},setNext:function(a){this.next=a,this.neighborChangedFn&&this.neighborChangedFn()},getPrev:function(){return this.prev},getNext:function(){return this.next},intersectIntervals:function(a,b){if(!a||!b)return null;var c=Math.max(a.s,b.s),d=Math.min(a.e,b.e);return d>=c?{s:c,e:d}:null},applyInterval:function(a,b){if(!a)return null;var c=Math.max(a.s,b);return c=Math.min(a.e,c)},inInterval:function(a,b){return a&&b>=a.s&&b<=a.e},getStartLimits:function(){return null!==this.getEnd()?{s:0,e:this.getEnd()-this.getMinLength()}:{s:0,e:this.dataFile.getLength()}},getEndLimits:function(){return null!==this.getStart()?{s:this.getStart()+this.getMinLength(),e:this.dataFile.getLength()}:{s:0,e:this.dataFile.getLength()}},canStart:function(a){var b=this.getStartLimits();return this.inInterval(b,a)},canEnd:function(a){var b=this.getEndLimits();return this.inInterval(b,a)},setStart:function(a){if(!this.canStart(a))throw new d("set-start","Cannot set starting position of time span, time span would overlap another or be shorter than the minimum length");this.start=a,this.updatePosition()},setEnd:function(a){if(!this.canEnd(a))throw new d("set-end","Cannot set ending position of time span, time span would overlap another or be shorter than the minimum length");this.end=a,this.updatePosition()},getStart:function(){return this.start},getStartX:function(){return this.dataFile.time2px(this.start,this.zoom)},getEndX:function(){return this.dataFile.time2px(this.end,this.zoom)},getEnd:function(){return this.end},updatePosition:function(){if(this.rendered){var a=this.dataFile.time2px(this.start,this.zoom),b=this.dataFile.time2px(this.end,this.zoom);this.positionChangedFn&&this.positionChangedFn(this.getStart(),this.getEnd());var c=a,d=this.getStartElement(),e=this.getEndElement(),f=this.getBackElement();if(d.css("position","absolute"),e.css("position","absolute"),f.css("position","absolute"),this.style.horizontal()){f.css({left:c,width:b-a}),d.css("left",c);var g=b-this.getEndDimensions().w;e.css("left",g)}else{f.css({top:c,height:b-a}),d.css("top",c);var g=b-this.getEndDimensions().h;e.css("top",g)}}},createStartElement:function(){return this.style.timeSpanStart()},createEndElement:function(){return this.style.timeSpanEnd()},createBackElement:function(){return this.style.timeSpanBackground()},getStartElement:function(){return this.startEl||(this.startEl=this.createStartElement()),this.startEl},getEndElement:function(){return this.endEl||(this.endEl=this.createEndElement()),this.endEl},getBackElement:function(){return this.backEl||(this.backEl=this.createBackElement()),this.backEl},getStartDimensions:function(){return this.collection.startDim||(this.collection.startDim=this.utils.getElementDimensions(this.getStartElement())),this.collection.startDim},getEndDimensions:function(){if(!this.collection.endDim){{!this.collection.areContainersConnected()}this.collection.endDim=this.utils.getElementDimensions(this.getEndElement())}return this.collection.endDim},render:function(a,b){if(this.rendered&&this.unRender(),null!==this.start&&null!==this.end&&null!==this.zoom){var c=this.getStartElement(),d=this.getEndElement();a||(a=this.foregroundContainer),b||(b=this.backgroundContainer);{this.getStartDimensions()}a.append(c,d);var e=this.getBackElement();b.append(e),this.rendered=!0,this.updatePosition()}},setZoom:function(a){this.zoom=a,this.updatePosition()},unRender:function(){this.rendered&&(this.startEl&&(this.startEl.remove(),this.startEl=null),this.endEl&&(this.endEl.remove(),this.endEl=null),this.backEl&&(this.backEl.remove(),this.backEl=null),this.startDim=null,this.endDim=null,this.rendered=!1)},onPositionChanged:function(a){this.positionChangedFn=a},onNeighborChanged:function(a){this.neighborChangedFn=a},onDestroyed:function(a){this.destroyedFn=a},onRemoved:function(a){this.removedFn=a},handleDestroyed:function(){this.unRender(),this.destroyedFn&&this.destroyedFn()},handleRemoved:function(){this.removedFn&&this.removedFn()},mergeWithPrev:function(){null!==this.getPrev()&&this.collection.mergeWithPrev(this)},remove:function(){this.collection.removeTimeSpan(this)},getElements:function(){return this.getStartElement().add(this.getEndElement()).add(this.getBackElement())},toggleClass:function(a,b){var c=this.getBackElement().add(this.getStartElement()).add(this.getEndElement());c.toggleClass(a,b)}},b.exports=e},{"../utils":15,"./time-span-error":13}],15:[function(a,b){var c=new function(){this.scrollbarDim=null,this.dimBase=null,this.setDimBase=function(a){this.dimBase=$(a)},this.getElementDimensions=function(a){var b=$(a).clone();b.css({position:"absolute"});var c=$(document.body);this.dimBase&&(c=this.dimBase),c.prepend(b);var d=[];return d.h=b.outerHeight(),d.w=b.outerWidth(),d.push(d.w),d.push(d.h),b.remove(),d},this.getScrollbarDim=function(){if(!this.scrollbarDim){var a=$('<div style="position: absolute; width: 100px; height: 100px; overflow: auto; visibility: hidden;"><div style="width: 200px; height: 200px;"></div></div>');$(document.body).prepend(a),a.scrollTop(500);var b=a.scrollTop();a.scrollLeft(500);var c=a.scrollLeft();a.remove(),this.scrollbarDim={height:b-100,width:c-100}}return this.scrollbarDim},this.zeroPaddedTime=function(a){var b=function(a,b){var c=b-a.toString().length+1;return Array(+(c>0&&c)).join("0")+a},c=Math.floor(a/3600),d=Math.floor((a-3600*c)/60),e=Math.floor(a-3600*c-60*d),f=Math.floor(10*(a-Math.floor(a)));return b(c,2)+":"+b(d,2)+":"+b(e,2)+"."+b(f,1)},this.formatTime=function(a){var b=function(a,b){var c=b-a.toString().length+1;return Array(+(c>0&&c)).join("0")+a},c=Math.floor(a/3600),d=Math.floor((a-60*c*60)/60),e=Math.floor(a-60*c*60-60*d),f=Math.round(1e3*(a-Math.floor(a)))/1e3,g="";if(0!=c&&(g+=c+":"),0!=d){var h=2;0==c&&(h=1),g+=b(d,h)+":"}var h=2;return 0==c&&0==d&&(h=1),g+=b(e,h),f=f.toString().slice(2),""!=f&&(g+="."+f),g}};b.exports=c},{}],16:[function(b,c){(function(b){!function(d){"use strict";function e(a,b){return!b&&a instanceof Array?a:Array.prototype.slice.call(a)}function f(a,b){return void 0!==a?a:b}function g(a,c,d,e){if(a instanceof g){var h=a.slice(c,c+d);return h._littleEndian=f(e,h._littleEndian),h}if(!(this instanceof g))return new g(a,c,d,e);if(this.buffer=a=g.wrapBuffer(a),this._isArrayBuffer=l.ArrayBuffer&&a instanceof ArrayBuffer,this._isPixelData=l.PixelData&&a instanceof CanvasPixelArray,this._isDataView=l.DataView&&this._isArrayBuffer,this._isNodeBuffer=l.NodeBuffer&&a instanceof b,!(this._isNodeBuffer||this._isArrayBuffer||this._isPixelData||a instanceof Array))throw new TypeError("jDataView buffer has an incompatible type");this._littleEndian=!!e;var i="byteLength"in a?a.byteLength:a.length;this.byteOffset=c=f(c,0),this.byteLength=d=f(d,i-c),this._isDataView?this._view=new DataView(a,c,d):this._checkBounds(c,d,i),this._engineAction=this._isDataView?this._dataViewAction:this._isNodeBuffer?this._nodeBufferAction:this._isArrayBuffer?this._arrayBufferAction:this._arrayAction}function h(a){if(l.NodeBuffer)return new b(a,"binary");for(var c=l.ArrayBuffer?Uint8Array:Array,d=new c(a.length),e=0,f=a.length;f>e;e++)d[e]=255&a.charCodeAt(e);return d}function i(a){return a>=0&&31>a?1<<a:i[a]||(i[a]=Math.pow(2,a))}function j(a,b){this.lo=a,this.hi=b}function k(){j.apply(this,arguments)}var l={NodeBuffer:"Buffer"in d&&"readInt16LE"in b.prototype,DataView:"DataView"in d&&("getFloat64"in DataView.prototype||"getFloat64"in new DataView(new ArrayBuffer(1))),ArrayBuffer:"ArrayBuffer"in d,PixelData:"CanvasPixelArray"in d&&"ImageData"in d&&"document"in d};if(l.NodeBuffer&&!function(a){try{a.writeFloatLE(1/0,0)}catch(b){l.NodeBuffer=!1}}(new b(4)),l.PixelData){var m=function(a,b){var c=m.context2d.createImageData((a+3)/4,1).data;if(c.byteLength=a,void 0!==b)for(var d=0;a>d;d++)c[d]=b[d];return c};m.context2d=document.createElement("canvas").getContext("2d")}var n={Int8:1,Int16:2,Int32:4,Uint8:1,Uint16:2,Uint32:4,Float32:4,Float64:8},o={Int8:"Int8",Int16:"Int16",Int32:"Int32",Uint8:"UInt8",Uint16:"UInt16",Uint32:"UInt32",Float32:"Float",Float64:"Double"};g.wrapBuffer=function(a){switch(typeof a){case"number":if(l.NodeBuffer)a=new b(a),a.fill(0);else if(l.ArrayBuffer)a=new Uint8Array(a).buffer;else if(l.PixelData)a=m(a);else{a=new Array(a);for(var c=0;c<a.length;c++)a[c]=0}return a;case"string":a=h(a);default:return"length"in a&&!(l.NodeBuffer&&a instanceof b||l.ArrayBuffer&&a instanceof ArrayBuffer||l.PixelData&&a instanceof CanvasPixelArray)&&(l.NodeBuffer?a=new b(a):l.ArrayBuffer?a instanceof ArrayBuffer||(a=new Uint8Array(a).buffer,a instanceof ArrayBuffer||(a=new Uint8Array(e(a,!0)).buffer)):a=l.PixelData?m(a.length,a):e(a)),a}},g.createBuffer=function(){return g.wrapBuffer(arguments)},g.Uint64=j,j.prototype={valueOf:function(){return this.lo+i(32)*this.hi},toString:function(){return Number.prototype.toString.apply(this.valueOf(),arguments)}},j.fromNumber=function(a){var b=Math.floor(a/i(32)),c=a-b*i(32);return new j(c,b)},g.Int64=k,k.prototype="create"in Object?Object.create(j.prototype):new j,k.prototype.valueOf=function(){return this.hi<i(31)?j.prototype.valueOf.apply(this,arguments):-(i(32)-this.lo+i(32)*(i(32)-1-this.hi))},k.fromNumber=function(a){var b,c;if(a>=0){var d=j.fromNumber(a);b=d.lo,c=d.hi}else c=Math.floor(a/i(32)),b=a-c*i(32),c+=i(32);return new k(b,c)},g.prototype={_offset:0,_bitOffset:0,compatibility:l,_checkBounds:function(a,b,c){if("number"!=typeof a)throw new TypeError("Offset is not a number.");if("number"!=typeof b)throw new TypeError("Size is not a number.");if(0>b)throw new RangeError("Length is negative.");if(0>a||a+b>f(c,this.byteLength))throw new RangeError("Offsets are out of bounds.")},_action:function(a,b,c,d,e){return this._engineAction(a,b,f(c,this._offset),f(d,this._littleEndian),e)},_dataViewAction:function(a,b,c,d,e){return this._offset=c+n[a],b?this._view["get"+a](c,d):this._view["set"+a](c,e,d)},_nodeBufferAction:function(a,b,c,d,e){this._offset=c+n[a];var f=o[a]+("Int8"===a||"Uint8"===a?"":d?"LE":"BE");return c+=this.byteOffset,b?this.buffer["read"+f](c):this.buffer["write"+f](e,c)},_arrayBufferAction:function(a,b,c,e,g){var h,i=n[a],j=d[a+"Array"];if(e=f(e,this._littleEndian),1===i||(this.byteOffset+c)%i===0&&e)return h=new j(this.buffer,this.byteOffset+c,1),this._offset=c+i,b?h[0]:h[0]=g;var k=new Uint8Array(b?this.getBytes(i,c,e,!0):i);return h=new j(k.buffer,0,1),b?h[0]:(h[0]=g,void this._setBytes(c,k,e))},_arrayAction:function(a,b,c,d,e){return b?this["_get"+a](c,d):this["_set"+a](c,e,d)},_getBytes:function(a,b,c){c=f(c,this._littleEndian),b=f(b,this._offset),a=f(a,this.byteLength-b),this._checkBounds(b,a),b+=this.byteOffset,this._offset=b-this.byteOffset+a;var d=this._isArrayBuffer?new Uint8Array(this.buffer,b,a):(this.buffer.slice||Array.prototype.slice).call(this.buffer,b,b+a);return c||1>=a?d:e(d).reverse()},getBytes:function(a,b,c,d){var g=this._getBytes(a,b,f(c,!0));return d?e(g):g},_setBytes:function(a,c,d){var g=c.length;if(0!==g){if(d=f(d,this._littleEndian),a=f(a,this._offset),this._checkBounds(a,g),!d&&g>1&&(c=e(c,!0).reverse()),a+=this.byteOffset,this._isArrayBuffer)new Uint8Array(this.buffer,a,g).set(c);else if(this._isNodeBuffer)(c instanceof b?c:new b(c)).copy(this.buffer,a);else for(var h=0;g>h;h++)this.buffer[a+h]=c[h];this._offset=a-this.byteOffset+g}},setBytes:function(a,b,c){this._setBytes(a,b,f(c,!0))},getString:function(a,b,c){if(this._isNodeBuffer)return b=f(b,this._offset),a=f(a,this.byteLength-b),this._checkBounds(b,a),this._offset=b+a,this.buffer.toString(c||"binary",this.byteOffset+b,this.byteOffset+this._offset);var d=this._getBytes(a,b,!0),e="";a=d.length;for(var g=0;a>g;g++)e+=String.fromCharCode(d[g]);return"utf8"===c&&(e=decodeURIComponent(escape(e))),e},setString:function(a,b,c){return this._isNodeBuffer?(a=f(a,this._offset),this._checkBounds(a,b.length),void(this._offset=a+this.buffer.write(b,this.byteOffset+a,c||"binary"))):("utf8"===c&&(b=unescape(encodeURIComponent(b))),void this._setBytes(a,h(b),!0))},getChar:function(a){return this.getString(1,a)},setChar:function(a,b){this.setString(a,b)},tell:function(){return this._offset},seek:function(a){return this._checkBounds(a,0),this._offset=a},skip:function(a){return this.seek(this._offset+a)},slice:function(a,b,c){function d(a,b){return 0>a?a+b:a}return a=d(a,this.byteLength),b=d(f(b,this.byteLength),this.byteLength),c?new g(this.getBytes(b-a,a,!0,!0),void 0,void 0,this._littleEndian):new g(this.buffer,this.byteOffset+a,b-a,this._littleEndian)},_getFloat64:function(a,b){var c=this._getBytes(8,a,b),d=1-2*(c[7]>>7),e=((c[7]<<1&255)<<3|c[6]>>4)-1023,f=(15&c[6])*i(48)+c[5]*i(40)+c[4]*i(32)+c[3]*i(24)+c[2]*i(16)+c[1]*i(8)+c[0];return 1024===e?0!==f?0/0:1/0*d:-1023===e?d*f*i(-1074):d*(1+f*i(-52))*i(e)},_getFloat32:function(a,b){var c=this._getBytes(4,a,b),d=1-2*(c[3]>>7),e=(c[3]<<1&255|c[2]>>7)-127,f=(127&c[2])<<16|c[1]<<8|c[0];return 128===e?0!==f?0/0:1/0*d:-127===e?d*f*i(-149):d*(1+f*i(-23))*i(e)},_get64:function(a,b,c){c=f(c,this._littleEndian),b=f(b,this._offset);for(var d=c?[0,4]:[4,0],e=0;2>e;e++)d[e]=this.getUint32(b+d[e],c);return this._offset=b+8,new a(d[0],d[1])},getInt64:function(a,b){return this._get64(k,a,b)},getUint64:function(a,b){return this._get64(j,a,b)},_getInt32:function(a,b){var c=this._getBytes(4,a,b);return c[3]<<24|c[2]<<16|c[1]<<8|c[0]},_getUint32:function(a,b){return this._getInt32(a,b)>>>0},_getInt16:function(a,b){return this._getUint16(a,b)<<16>>16},_getUint16:function(a,b){var c=this._getBytes(2,a,b);return c[1]<<8|c[0]},_getInt8:function(a){return this._getUint8(a)<<24>>24},_getUint8:function(a){return this._getBytes(1,a)[0]},_getBitRangeData:function(a,b){var c=(f(b,this._offset)<<3)+this._bitOffset,d=c+a,e=c>>>3,g=d+7>>>3,h=this._getBytes(g-e,e,!0),i=0;(this._bitOffset=7&d)&&(this._bitOffset-=8);for(var j=0,k=h.length;k>j;j++)i=i<<8|h[j];return{start:e,bytes:h,wideValue:i}},getSigned:function(a,b){var c=32-a;return this.getUnsigned(a,b)<<c>>c},getUnsigned:function(a,b){var c=this._getBitRangeData(a,b).wideValue>>>-this._bitOffset;return 32>a?c&~(-1<<a):c},_setBinaryFloat:function(a,b,c,d,e){var f,g,h=0>b?1:0,j=~(-1<<d-1),k=1-j;0>b&&(b=-b),0===b?(f=0,g=0):isNaN(b)?(f=2*j+1,g=1):1/0===b?(f=2*j+1,g=0):(f=Math.floor(Math.log(b)/Math.LN2),f>=k&&j>=f?(g=Math.floor((b*i(-f)-1)*i(c)),f+=j):(g=Math.floor(b/i(k-c)),f=0));for(var l=[];c>=8;)l.push(g%256),g=Math.floor(g/256),c-=8;for(f=f<<c|g,d+=c;d>=8;)l.push(255&f),f>>>=8,d-=8;l.push(h<<d|f),this._setBytes(a,l,e)},_setFloat32:function(a,b,c){this._setBinaryFloat(a,b,23,8,c)},_setFloat64:function(a,b,c){this._setBinaryFloat(a,b,52,11,c)},_set64:function(a,b,c,d){c instanceof a||(c=a.fromNumber(c)),d=f(d,this._littleEndian),b=f(b,this._offset);var e=d?{lo:0,hi:4}:{lo:4,hi:0};for(var g in e)this.setUint32(b+e[g],c[g],d);this._offset=b+8},setInt64:function(a,b,c){this._set64(k,a,b,c)},setUint64:function(a,b,c){this._set64(j,a,b,c)},_setUint32:function(a,b,c){this._setBytes(a,[255&b,b>>>8&255,b>>>16&255,b>>>24],c)},_setUint16:function(a,b,c){this._setBytes(a,[255&b,b>>>8&255],c)},_setUint8:function(a,b){this._setBytes(a,[255&b])},setUnsigned:function(a,b,c){var d=this._getBitRangeData(c,a),e=d.wideValue,f=d.bytes;e&=~(~(-1<<c)<<-this._bitOffset),e|=(32>c?b&~(-1<<c):b)<<-this._bitOffset;for(var g=f.length-1;g>=0;g--)f[g]=255&e,e>>>=8;this._setBytes(d.start,f,!0)}};var p=g.prototype;for(var q in n)!function(a){p["get"+a]=function(b,c){return this._action(a,!0,b,c)},p["set"+a]=function(b,c,d){this._action(a,!1,b,d,c)}}(q);p._setInt32=p._setUint32,p._setInt16=p._setUint16,p._setInt8=p._setUint8,p.setSigned=p.setUnsigned;for(var r in p)"set"===r.slice(0,3)&&!function(a){p["write"+a]=function(){Array.prototype.unshift.call(arguments,void 0),this["set"+a].apply(this,arguments)}}(r.slice(3));if("undefined"!=typeof c&&"object"==typeof c.exports)c.exports=g;else if("function"==typeof a&&a.amd)a([],function(){return g});else{var s=d.jDataView;(d.jDataView=g).noConflict=function(){return d.jDataView=s,this}}}(function(){return this}())}).call(this,b("buffer").Buffer)},{buffer:19}],17:[function(b,c,d){!function(b){"function"==typeof a&&a.amd?a(["jquery"],b):"object"==typeof d?c.exports=b:b(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,k=0,l=0,m=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(l=-1*g.detail),"wheelDelta"in g&&(l=g.wheelDelta),"wheelDeltaY"in g&&(l=g.wheelDeltaY),"wheelDeltaX"in g&&(k=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(k=-1*l,l=0),j=0===l?k:l,"deltaY"in g&&(l=-1*g.deltaY,j=l),"deltaX"in g&&(k=g.deltaX,0===l&&(j=-1*k)),0!==l||0!==k){if(1===g.deltaMode){var n=a.data(this,"mousewheel-line-height");j*=n,l*=n,k*=n}else if(2===g.deltaMode){var o=a.data(this,"mousewheel-page-height");j*=o,l*=o,k*=o}return m=Math.max(Math.abs(l),Math.abs(k)),(!f||f>m)&&(f=m,d(g,m)&&(f/=40)),d(g,m)&&(j/=40,k/=40,l/=40),j=Math[j>=1?"floor":"ceil"](j/f),k=Math[k>=1?"floor":"ceil"](k/f),l=Math[l>=1?"floor":"ceil"](l/f),b.deltaX=k,b.deltaY=l,b.deltaFactor=f,b.deltaMode=0,h.unshift(b,j,k,l),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var a=h.length;a;)this.removeEventListener(h[--a],b,!1);else this.onmousewheel=null},getLineHeight:function(b){return parseInt(a(b)["offsetParent"in a.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})},{}],18:[function(a,b){var c=(a("./vendor/jquery-mousewheel"),a("./utils")),d=(a("./style"),a("./segment")),e=a("./segment-collection"),f=function(a,b,f){var g=this;this.zoom=f.zoom,a=$(a),this.containerEl=a.eq(0),this.containerEl.empty(),this.dataFile=b,this.options=f,this.dataFile.setMono(this.options.mono),this.style=this.options.style,this.zoomChangedHnd=[],this.zoomFactorChangedHnd=[],this.scrollbarEl=$('<div class="viewport"></div>'),c.setDimBase(this.scrollbarEl),this.style.vertical()&&this.scrollbarEl.css("height","100%"),this.containerEl.append(this.scrollbarEl),this.segmentsEl=$('<div style="position: relative;" class="segments"></div>'),this.segmentsEl.height(this.internalHeight()),this.scrollbarEl.append(this.segmentsEl),this.backgroundEl=$('<div style="position: absolute; z-index: 0;" class="background">'),this.foregroundEl=$('<div style="position: absolute; z-index: 5;" class="foreground">'),this.timeSpanEl=$('<div style="width: 100%; height: 100%; position: absolute;" class="timeSpans"></div>'),this.foregroundEl.append(this.timeSpanEl),this.cursorEl=this.options.style.cursor(),this.cursorDim=c.getElementDimensions(this.cursorEl),this.cursorEl.css({position:"absolute",display:"none","z-index":10,pointerEvents:"none"}),this.foregroundEl.append(this.cursorEl),this.updateDimensions();var h=document.createElement("x");h.style.cssText="pointer-events:auto";var i="auto"===h.style.pointerEvents;i||(this.options.hover=!1),this.hoverEl=this.options.style.hover(),this.hoverDim=c.getElementDimensions(this.hoverEl),this.foregroundEl.append(this.hoverEl),this.setHoverDisplayed(this.options.hover),this.hoverEl.css({position:"absolute",display:"none"}),this.options.hover&&this.foregroundEl.on("mouseenter mousemove",function(a){a.preventDefault();var b;if(g.options.style.horizontal()){if(b=a.pageX-g.internalOffset().left,b>=g.internalWidth())return void g.scrollbarEl.triggerHandler("mouseleave");g.hoverEl.css("left",Math.floor(b-g.hoverDim.w/2))}else{if(b=a.pageY-g.internalOffset().top,b>=g.internalWidth())return void g.scrollbarEl.triggerHandler("mouseleave");g.hoverEl.css("top",Math.floor(b-g.hoverDim.h/2))}}).on("mouseleave",function(){g.hoverEl.hide()}).on("mouseenter",function(){g.hoverDisplayed&&g.hoverEl.show()});var j=!1;this.foregroundEl.on("mousedown",function(){j=!0}),this.clickTimer=null,this.foregroundEl.on("mouseup",function(a){if(a.preventDefault(),j){j=!1;var b;b=g.options.style.horizontal()?a.pageX-g.internalOffset().left:a.pageY-g.internalOffset().top,b>=g.internalWidth()||(g.clickTimer?(clearTimeout(g.clickTimer),g.dblClicked(g.internalXToTime(b),a),g.clickTimer=null):g.dblClickHnd?g.clickTimer=setTimeout(function(){g.clickTimer=null,g.clicked(g.internalXToTime(b),a)},300):g.clicked(g.internalXToTime(b),a))}}),this.scrollbarEl.prepend(this.foregroundEl),this.scrollbarEl.prepend(this.backgroundEl);var k=null,l=null;this.scrollbarEl.scroll(function(){g.handleScrolled(),k&&clearTimeout(k),k=setTimeout(function(){l=null,g.updateSegments()},40)}),this.scrollbarEl.on("mousewheel",function(a){return(a.altKey||a.ctrlKey)&&(g.mouseWheelZoomed(a.deltaY>0?g._zoomIn:g._zoomOut),a.preventDefault()),!0}),this.lastMouseEvent=null,this.scrollbarEl.on("mousemove mouseenter",function(a){g.lastMouseEvent=a}),this.cursor=null,this.handleMouseEnter=function(){g.mouseTimeout&&clearTimeout(g.mouseTimeout),g.isMouseOver=!0},this.handleMouseLeave=function(){this.mouseTimeout&&clearTimeout(this.mouseTimeout),g.mouseTimeout=setTimeout(function(){g.isMouseOver=!1},g.options.autoScrollTimeout)},this.options.autoScrollMouseLock&&this.scrollbarEl.on("mouseenter",this.handleMouseEnter).on("mouseleave",this.handleMouseLeave);var m=function(a){var b=new d(g.dataFile,a,g.internalHeight(),g.style);return b};segments=new e(this.dataFile,this.segmentsEl,m,this.options.segmentWidth,g.style);var n;if(n=this.style.horizontal()?this.segmentsEl.width():this.segmentsEl.height(),segments.setViewportLength(n),segments.updateSegments(),this.segments=segments,this.zoom=null,this.setZoom(this.options.zoom),this.scrollHnd=[],this.isScrollLocked=!1,this.viewportOffset=function(){return this.getViewportElement().offset()},this.options.cacheOffset){var o=this.viewportOffset();this.viewportOffset=function(){return o}}this.internalOffset=function(){var a=this.viewportOffset(),b={left:0,top:0};this.style.horizontal()?b.left=-this.getViewportElement()[0].scrollLeft:b.top=-this.getViewportElement()[0].scrollTop;var c={left:a.left+b.left,top:a.top+b.top};return c}};f.prototype={timeToInternalX:function(a){return this.dataFile.time2px(a,this.zoom)},internalXToTime:function(a){return this.dataFile.px2time(a,this.zoom)},internalWidth:function(){return Math.floor(this.dataFile.getFrameCnt()/this.zoom)},timelineHeight:function(){return d.getTimelineHeight(this.options.style)},waveformHeight:function(){return this.internalHeight()-this.timelineHeight()},internalHeight:function(){if(null!==this.options.height)return this.options.height;var a=(this.style.horizontal()?c.getScrollbarDim().height:c.getScrollbarDim().width)+4;return(this.style.horizontal()?this.scrollbarEl.height():this.scrollbarEl.width())-a},updateSegments:function(){var a;a=this.style.horizontal()?this.scrollbarEl.scrollLeft():this.scrollbarEl.scrollTop(),this.segments.scrollTo(a)},updateCursor:function(){var a=this.cursor;if(this.segments.setCursor(a),null!==a){var b={display:"block"},c=this.timeToInternalX(a);this.options.style.horizontal()?b.left=c-this.cursorDim.w/2:b.top=c-this.cursorDim.h/2,this.cursorEl.css(b)}else this.cursorEl.hide()},autoScroll:function(a){var b,c,d=this.timeToInternalX(a),e=this.style.horizontal()?this.scrollbarEl.width():this.scrollbarEl.height(),f=this;c=this.style.horizontal()?f.scrollbarEl.scrollLeft():f.scrollbarEl.scrollTop(),b=this.style.horizontal()?function(a){return f.scrollbarEl.scrollLeft(a)}:function(a){return f.scrollbarEl.scrollTop(a)};var g=this.timeToInternalX(this.cursor),h=this.timeToInternalX(a);if(null===this.cursor&&(this.cursorX=h),"smooth"==this.options.autoScrollType){var i=Math.floor(d-e*this.options.autoScrollTarget);if(g>=c&&c+e>g&&h>=c&&c+e>h){var j=Math.abs(h-g);j=Math.max(j,1);var k;i>c?(k=c+2*j,k=Math.min(k,i)):k=c,b(k)}else b(i)}if("jumpy"==this.options.autoScrollType||"jumpy-animated"==this.options.autoScrollType){var k=h-e*this.options.autoScrollTarget,l=h-g>.1*e;if(g>=c&&c+e>g&&!l)if(h>=c&&h<c+e*this.options.autoScrollThreshold);else if("jumpy"==this.options.autoScrollType)b(k);else{f.scrollbarEl.stop();var m;m=this.style.horizontal()?{scrollLeft:k}:{scrollTop:k},f.scrollbarEl.animate(m,this.options.autoScrollAnimationDuration)}else b(k)}},scrollToTime:function(a,b,c){"undefined"==typeof c&&(c=this.options.autoScrollAnimationDuration),"undefined"==typeof b&&(b=.5);var d,e=this.timeToInternalX(a),f=this.style.horizontal()?this.scrollbarEl.width():this.scrollbarEl.height(),g=f*b,h=e-g;d=this.style.horizontal()?{scrollLeft:h}:{scrollTop:h},this.scrollbarEl.stop(!0,!0).animate(d,c)},setCursor:function(a){var b=this.dataFile.getLength();if(a>b)return void this.removeCursor();if(this.options.autoScroll&&!this.isMouseOver&&!this.isScrollLocked)try{this.autoScroll(a)}catch(c){console.dir(c)}this.cursor=a,this.updateCursor()},removeCursor:function(){this.cursor=null,this.updateCursor(),this.segments.removeCursor(),this.cursorEl.hide()},onClick:function(a){this.clickHnd=a},clicked:function(a,b){this.clickHnd&&this.clickHnd(a,b)},onDblClick:function(a){this.dblClickHnd=a},dblClicked:function(a,b){this.dblClickHnd&&this.dblClickHnd(a,b)},updateDimensions:function(){this.options.style.horizontal()?(this.backgroundEl.css({width:this.internalWidth(),height:this.waveformHeight()}),this.foregroundEl.css({width:this.internalWidth(),height:this.waveformHeight()})):(this.backgroundEl.css({height:this.internalWidth(),width:this.waveformHeight(),left:this.timelineHeight()}),this.foregroundEl.css({height:this.internalWidth(),width:this.waveformHeight(),left:this.timelineHeight()}))},scroll:function(a){this.style.horizontal()?this.scrollbarEl.scrollLeft(a):this.scrollbarEl.scrollTop(a)},onScroll:function(a){this.scrollHnd.push(a)},handleScrolled:function(){var a;a=this.style.horizontal()?this.scrollbarEl.scrollLeft():this.scrollbarEl.scrollTop();var b;for(b in this.scrollHnd)this.scrollHnd[b](a)},_zoomIn:function(a){void 0===a&&(a=this.options.zoomChangeFactor),this._setZoom(this.getZoom()*a)},_zoomOut:function(a){void 0===a&&(a=this.options.zoomChangeFactor),this._setZoom(this.getZoom()/a)},zoomIn:function(a){var b=this.getTimeInMiddle(),c=this.zoom;this._zoomIn(a),c!==this.zoom&&(this.setTimeInMiddle(b),this.handleZoomed())},zoomOut:function(a){var b=this.getTimeInMiddle(),c=this.zoom;this._zoomOut(a),c!==this.zoom&&(this.setTimeInMiddle(b),this.handleZoomed())},getZoom:function(){return this.dataFile.getSampleRate()/this.getZoomFactor()},normalizeZoom:function(a){return null!==this.options.maxZoom&&(a=Math.min(a,this.options.maxZoom)),null!==this.options.minZoom&&(a=Math.max(a,this.options.minZoom)),a},_setZoom:function(a){a=this.normalizeZoom(a);var b=this.dataFile.getSampleRate()/a;this._setZoomFactor(b)},setZoom:function(a){a=this.normalizeZoom(a);var b=this.dataFile.getSampleRate()/a;this.setZoomFactor(b)},getZoomFactor:function(){return this.zoom},getTimeFromMouseCoords:function(a,b){var c=this.viewportOffset();return pos=this.style.horizontal()?this.scrollbarEl.scrollLeft()+a-c.left:this.scrollbarEl.scrollTop()+b-c.top,this.internalXToTime(pos)},setTimeAtMouseCoords:function(a,b,c){var d,e=this.viewportOffset(),f=this.timeToInternalX(a);this.style.horizontal()?(d=f-(b-e.left),this.scrollbarEl.scrollLeft(d)):(d=f-(c-e.top),this.scrollbarEl.scrollTop(d))},getTimeInMiddle:function(){var a;return a=this.style.horizontal()?this.scrollbarEl.scrollLeft()+this.scrollbarEl.width()/2:this.scrollbarEl.scrollTop()+this.scrollbarEl.height()/2,this.internalXToTime(a)},setTimeInMiddle:function(a){var b;this.style.horizontal()?(b=this.timeToInternalX(a)-this.scrollbarEl.width()/2,this.scrollbarEl.scrollLeft(b)):(b=this.timeToInternalX(a)-this.scrollbarEl.height()/2,this.scrollbarEl.scrollTop(b))},mouseWheelZoomed:function(a){var b=this.getTimeFromMouseCoords(this.lastMouseEvent.pageX,this.lastMouseEvent.pageY),c=this.zoom;a.call(this),c!==this.zoom&&(this.setTimeAtMouseCoords(b,this.lastMouseEvent.pageX,this.lastMouseEvent.pageY),this.handleZoomed(),this.handleScrolled())},_setZoomFactor:function(a){a!==this.zoom&&(this.zoom=a,this.updateDimensions())},setZoomFactor:function(a){a!==this.zoom&&(this._setZoomFactor(a),this.handleZoomed())},onZoomed:function(a){this.zoomChangedHnd.push(a)},handleZoomed:function(){this.segments.setZoom(this.zoom),this.updateCursor();var a;if(this.zoomChangedHnd)for(a in this.zoomChangedHnd)this.zoomChangedHnd[a](this.getZoom(),this.internalWidth());if(this.zoomFactorChangedHnd)for(a in this.zoomFactorChangedHnd)this.zoomFactorChangedHnd[a](this.getZoomFactor())},onZoomFactorChanged:function(a){this.zoomFactorChangedHnd.push(a)},setMono:function(a){void 0===a&&(a=!0),this.options.mono!==a&&(this.options.mono=a,this.dataFile.setMono(a),this.segments.rebuild())},getViewportElement:function(){return this.scrollbarEl},getTimeSpanContainers:function(){return{back:this.backgroundEl,front:this.timeSpanEl}},getDataFile:function(){return this.dataFile},getStyle:function(){return this.options.style},setHoverDisplayed:function(a){this.hoverDisplayed=a,this.options.hover||(a=!1),this.hoverEl.css({display:a?"block":"none"})},setScrollLocked:function(a){this.isScrollLocked=a}},b.exports=f},{"./segment":5,"./segment-collection":4,"./style":6,"./utils":15,"./vendor/jquery-mousewheel":17}],19:[function(a,b,c){function d(a,b,c){if(!(this instanceof d))return new d(a,b,c);var e=typeof a;if("base64"===b&&"string"===e)for(a=C(a);a.length%4!==0;)a+="=";var f;if("number"===e)f=F(a);else if("string"===e)f=d.byteLength(a,b);else{if("object"!==e)throw new Error("First argument needs to be a number, array or string.");f=F(a.length)}var g;d._useTypedArrays?g=D(new Uint8Array(f)):(g=this,g.length=f,g._isBuffer=!0);var h;if(d._useTypedArrays&&"function"==typeof Uint8Array&&a instanceof Uint8Array)g._set(a);else if(H(a))for(h=0;f>h;h++)g[h]=d.isBuffer(a)?a.readUInt8(h):a[h];else if("string"===e)g.write(a,0,b);else if("number"===e&&!d._useTypedArrays&&!c)for(h=0;f>h;h++)g[h]=0;
return g}function e(a,b,c,e){c=Number(c)||0;var f=a.length-c;e?(e=Number(e),e>f&&(e=f)):e=f;var g=b.length;S(g%2===0,"Invalid hex string"),e>g/2&&(e=g/2);for(var h=0;e>h;h++){var i=parseInt(b.substr(2*h,2),16);S(!isNaN(i),"Invalid hex string"),a[c+h]=i}return d._charsWritten=2*h,h}function f(a,b,c,e){var f=d._charsWritten=N(J(b),a,c,e);return f}function g(a,b,c,e){var f=d._charsWritten=N(K(b),a,c,e);return f}function h(a,b,c,d){return g(a,b,c,d)}function i(a,b,c,e){var f=d._charsWritten=N(M(b),a,c,e);return f}function j(a,b,c,e){var f=d._charsWritten=N(L(b),a,c,e);return f}function k(a,b,c){return T.fromByteArray(0===b&&c===a.length?a:a.slice(b,c))}function l(a,b,c){var d="",e="";c=Math.min(a.length,c);for(var f=b;c>f;f++)a[f]<=127?(d+=O(e)+String.fromCharCode(a[f]),e=""):e+="%"+a[f].toString(16);return d+O(e)}function m(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;c>e;e++)d+=String.fromCharCode(a[e]);return d}function n(a,b,c){return m(a,b,c)}function o(a,b,c){var d=a.length;(!b||0>b)&&(b=0),(!c||0>c||c>d)&&(c=d);for(var e="",f=b;c>f;f++)e+=I(a[f]);return e}function p(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function q(a,b,c,d){d||(S("boolean"==typeof c,"missing or invalid endian"),S(void 0!==b&&null!==b,"missing offset"),S(b+1<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f;return c?(f=a[b],e>b+1&&(f|=a[b+1]<<8)):(f=a[b]<<8,e>b+1&&(f|=a[b+1])),f}}function r(a,b,c,d){d||(S("boolean"==typeof c,"missing or invalid endian"),S(void 0!==b&&null!==b,"missing offset"),S(b+3<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f;return c?(e>b+2&&(f=a[b+2]<<16),e>b+1&&(f|=a[b+1]<<8),f|=a[b],e>b+3&&(f+=a[b+3]<<24>>>0)):(e>b+1&&(f=a[b+1]<<16),e>b+2&&(f|=a[b+2]<<8),e>b+3&&(f|=a[b+3]),f+=a[b]<<24>>>0),f}}function s(a,b,c,d){d||(S("boolean"==typeof c,"missing or invalid endian"),S(void 0!==b&&null!==b,"missing offset"),S(b+1<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f=q(a,b,c,!0),g=32768&f;return g?-1*(65535-f+1):f}}function t(a,b,c,d){d||(S("boolean"==typeof c,"missing or invalid endian"),S(void 0!==b&&null!==b,"missing offset"),S(b+3<a.length,"Trying to read beyond buffer length"));var e=a.length;if(!(b>=e)){var f=r(a,b,c,!0),g=2147483648&f;return g?-1*(4294967295-f+1):f}}function u(a,b,c,d){return d||(S("boolean"==typeof c,"missing or invalid endian"),S(b+3<a.length,"Trying to read beyond buffer length")),U.read(a,b,c,23,4)}function v(a,b,c,d){return d||(S("boolean"==typeof c,"missing or invalid endian"),S(b+7<a.length,"Trying to read beyond buffer length")),U.read(a,b,c,52,8)}function w(a,b,c,d,e){e||(S(void 0!==b&&null!==b,"missing value"),S("boolean"==typeof d,"missing or invalid endian"),S(void 0!==c&&null!==c,"missing offset"),S(c+1<a.length,"trying to write beyond buffer length"),P(b,65535));var f=a.length;if(!(c>=f))for(var g=0,h=Math.min(f-c,2);h>g;g++)a[c+g]=(b&255<<8*(d?g:1-g))>>>8*(d?g:1-g)}function x(a,b,c,d,e){e||(S(void 0!==b&&null!==b,"missing value"),S("boolean"==typeof d,"missing or invalid endian"),S(void 0!==c&&null!==c,"missing offset"),S(c+3<a.length,"trying to write beyond buffer length"),P(b,4294967295));var f=a.length;if(!(c>=f))for(var g=0,h=Math.min(f-c,4);h>g;g++)a[c+g]=b>>>8*(d?g:3-g)&255}function y(a,b,c,d,e){e||(S(void 0!==b&&null!==b,"missing value"),S("boolean"==typeof d,"missing or invalid endian"),S(void 0!==c&&null!==c,"missing offset"),S(c+1<a.length,"Trying to write beyond buffer length"),Q(b,32767,-32768));var f=a.length;c>=f||(b>=0?w(a,b,c,d,e):w(a,65535+b+1,c,d,e))}function z(a,b,c,d,e){e||(S(void 0!==b&&null!==b,"missing value"),S("boolean"==typeof d,"missing or invalid endian"),S(void 0!==c&&null!==c,"missing offset"),S(c+3<a.length,"Trying to write beyond buffer length"),Q(b,2147483647,-2147483648));var f=a.length;c>=f||(b>=0?x(a,b,c,d,e):x(a,4294967295+b+1,c,d,e))}function A(a,b,c,d,e){e||(S(void 0!==b&&null!==b,"missing value"),S("boolean"==typeof d,"missing or invalid endian"),S(void 0!==c&&null!==c,"missing offset"),S(c+3<a.length,"Trying to write beyond buffer length"),R(b,3.4028234663852886e38,-3.4028234663852886e38));var f=a.length;c>=f||U.write(a,b,c,d,23,4)}function B(a,b,c,d,e){e||(S(void 0!==b&&null!==b,"missing value"),S("boolean"==typeof d,"missing or invalid endian"),S(void 0!==c&&null!==c,"missing offset"),S(c+7<a.length,"Trying to write beyond buffer length"),R(b,1.7976931348623157e308,-1.7976931348623157e308));var f=a.length;c>=f||U.write(a,b,c,d,52,8)}function C(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function D(a){return a._isBuffer=!0,a._get=a.get,a._set=a.set,a.get=V.get,a.set=V.set,a.write=V.write,a.toString=V.toString,a.toLocaleString=V.toString,a.toJSON=V.toJSON,a.copy=V.copy,a.slice=V.slice,a.readUInt8=V.readUInt8,a.readUInt16LE=V.readUInt16LE,a.readUInt16BE=V.readUInt16BE,a.readUInt32LE=V.readUInt32LE,a.readUInt32BE=V.readUInt32BE,a.readInt8=V.readInt8,a.readInt16LE=V.readInt16LE,a.readInt16BE=V.readInt16BE,a.readInt32LE=V.readInt32LE,a.readInt32BE=V.readInt32BE,a.readFloatLE=V.readFloatLE,a.readFloatBE=V.readFloatBE,a.readDoubleLE=V.readDoubleLE,a.readDoubleBE=V.readDoubleBE,a.writeUInt8=V.writeUInt8,a.writeUInt16LE=V.writeUInt16LE,a.writeUInt16BE=V.writeUInt16BE,a.writeUInt32LE=V.writeUInt32LE,a.writeUInt32BE=V.writeUInt32BE,a.writeInt8=V.writeInt8,a.writeInt16LE=V.writeInt16LE,a.writeInt16BE=V.writeInt16BE,a.writeInt32LE=V.writeInt32LE,a.writeInt32BE=V.writeInt32BE,a.writeFloatLE=V.writeFloatLE,a.writeFloatBE=V.writeFloatBE,a.writeDoubleLE=V.writeDoubleLE,a.writeDoubleBE=V.writeDoubleBE,a.fill=V.fill,a.inspect=V.inspect,a.toArrayBuffer=V.toArrayBuffer,a}function E(a,b,c){return"number"!=typeof a?c:(a=~~a,a>=b?b:a>=0?a:(a+=b,a>=0?a:0))}function F(a){return a=~~Math.ceil(+a),0>a?0:a}function G(a){return(Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)})(a)}function H(a){return G(a)||d.isBuffer(a)||a&&"object"==typeof a&&"number"==typeof a.length}function I(a){return 16>a?"0"+a.toString(16):a.toString(16)}function J(a){for(var b=[],c=0;c<a.length;c++){var d=a.charCodeAt(c);if(127>=d)b.push(a.charCodeAt(c));else{var e=c;d>=55296&&57343>=d&&c++;for(var f=encodeURIComponent(a.slice(e,c+1)).substr(1).split("%"),g=0;g<f.length;g++)b.push(parseInt(f[g],16))}}return b}function K(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function L(a){for(var b,c,d,e=[],f=0;f<a.length;f++)b=a.charCodeAt(f),c=b>>8,d=b%256,e.push(d),e.push(c);return e}function M(a){return T.toByteArray(a)}function N(a,b,c,d){for(var e=0;d>e&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}function O(a){try{return decodeURIComponent(a)}catch(b){return String.fromCharCode(65533)}}function P(a,b){S("number"==typeof a,"cannot write a non-number as a number"),S(a>=0,"specified a negative value for writing an unsigned value"),S(b>=a,"value is larger than maximum value for type"),S(Math.floor(a)===a,"value has a fractional component")}function Q(a,b,c){S("number"==typeof a,"cannot write a non-number as a number"),S(b>=a,"value larger than maximum allowed value"),S(a>=c,"value smaller than minimum allowed value"),S(Math.floor(a)===a,"value has a fractional component")}function R(a,b,c){S("number"==typeof a,"cannot write a non-number as a number"),S(b>=a,"value larger than maximum allowed value"),S(a>=c,"value smaller than minimum allowed value")}function S(a,b){if(!a)throw new Error(b||"Failed assertion")}var T=a("base64-js"),U=a("ieee754");c.Buffer=d,c.SlowBuffer=d,c.INSPECT_MAX_BYTES=50,d.poolSize=8192,d._useTypedArrays=function(){if("function"!=typeof Uint8Array||"function"!=typeof ArrayBuffer)return!1;try{var a=new Uint8Array(0);return a.foo=function(){return 42},42===a.foo()&&"function"==typeof a.subarray}catch(b){return!1}}(),d.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.isBuffer=function(a){return!(null===a||void 0===a||!a._isBuffer)},d.byteLength=function(a,b){var c;switch(a+="",b||"utf8"){case"hex":c=a.length/2;break;case"utf8":case"utf-8":c=J(a).length;break;case"ascii":case"binary":case"raw":c=a.length;break;case"base64":c=M(a).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":c=2*a.length;break;default:throw new Error("Unknown encoding")}return c},d.concat=function(a,b){if(S(G(a),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===a.length)return new d(0);if(1===a.length)return a[0];var c;if("number"!=typeof b)for(b=0,c=0;c<a.length;c++)b+=a[c].length;var e=new d(b),f=0;for(c=0;c<a.length;c++){var g=a[c];g.copy(e,f),f+=g.length}return e},d.prototype.write=function(a,b,c,d){if(isFinite(b))isFinite(c)||(d=c,c=void 0);else{var k=d;d=b,b=c,c=k}b=Number(b)||0;var l=this.length-b;c?(c=Number(c),c>l&&(c=l)):c=l,d=String(d||"utf8").toLowerCase();var m;switch(d){case"hex":m=e(this,a,b,c);break;case"utf8":case"utf-8":m=f(this,a,b,c);break;case"ascii":m=g(this,a,b,c);break;case"binary":m=h(this,a,b,c);break;case"base64":m=i(this,a,b,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":m=j(this,a,b,c);break;default:throw new Error("Unknown encoding")}return m},d.prototype.toString=function(a,b,c){var d=this;if(a=String(a||"utf8").toLowerCase(),b=Number(b)||0,c=void 0!==c?Number(c):c=d.length,c===b)return"";var e;switch(a){case"hex":e=o(d,b,c);break;case"utf8":case"utf-8":e=l(d,b,c);break;case"ascii":e=m(d,b,c);break;case"binary":e=n(d,b,c);break;case"base64":e=k(d,b,c);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":e=p(d,b,c);break;default:throw new Error("Unknown encoding")}return e},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},d.prototype.copy=function(a,b,c,d){var e=this;if(c||(c=0),d||0===d||(d=this.length),b||(b=0),d!==c&&0!==a.length&&0!==e.length){S(d>=c,"sourceEnd < sourceStart"),S(b>=0&&b<a.length,"targetStart out of bounds"),S(c>=0&&c<e.length,"sourceStart out of bounds"),S(d>=0&&d<=e.length,"sourceEnd out of bounds"),d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);for(var f=0;d-c>f;f++)a[f+b]=this[f+c]}},d.prototype.slice=function(a,b){var c=this.length;if(a=E(a,c,0),b=E(b,c,c),d._useTypedArrays)return D(this.subarray(a,b));for(var e=b-a,f=new d(e,void 0,!0),g=0;e>g;g++)f[g]=this[g+a];return f},d.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},d.prototype.set=function(a,b){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(a,b)},d.prototype.readUInt8=function(a,b){return b||(S(void 0!==a&&null!==a,"missing offset"),S(a<this.length,"Trying to read beyond buffer length")),a>=this.length?void 0:this[a]},d.prototype.readUInt16LE=function(a,b){return q(this,a,!0,b)},d.prototype.readUInt16BE=function(a,b){return q(this,a,!1,b)},d.prototype.readUInt32LE=function(a,b){return r(this,a,!0,b)},d.prototype.readUInt32BE=function(a,b){return r(this,a,!1,b)},d.prototype.readInt8=function(a,b){if(b||(S(void 0!==a&&null!==a,"missing offset"),S(a<this.length,"Trying to read beyond buffer length")),!(a>=this.length)){var c=128&this[a];return c?-1*(255-this[a]+1):this[a]}},d.prototype.readInt16LE=function(a,b){return s(this,a,!0,b)},d.prototype.readInt16BE=function(a,b){return s(this,a,!1,b)},d.prototype.readInt32LE=function(a,b){return t(this,a,!0,b)},d.prototype.readInt32BE=function(a,b){return t(this,a,!1,b)},d.prototype.readFloatLE=function(a,b){return u(this,a,!0,b)},d.prototype.readFloatBE=function(a,b){return u(this,a,!1,b)},d.prototype.readDoubleLE=function(a,b){return v(this,a,!0,b)},d.prototype.readDoubleBE=function(a,b){return v(this,a,!1,b)},d.prototype.writeUInt8=function(a,b,c){c||(S(void 0!==a&&null!==a,"missing value"),S(void 0!==b&&null!==b,"missing offset"),S(b<this.length,"trying to write beyond buffer length"),P(a,255)),b>=this.length||(this[b]=a)},d.prototype.writeUInt16LE=function(a,b,c){w(this,a,b,!0,c)},d.prototype.writeUInt16BE=function(a,b,c){w(this,a,b,!1,c)},d.prototype.writeUInt32LE=function(a,b,c){x(this,a,b,!0,c)},d.prototype.writeUInt32BE=function(a,b,c){x(this,a,b,!1,c)},d.prototype.writeInt8=function(a,b,c){c||(S(void 0!==a&&null!==a,"missing value"),S(void 0!==b&&null!==b,"missing offset"),S(b<this.length,"Trying to write beyond buffer length"),Q(a,127,-128)),b>=this.length||(a>=0?this.writeUInt8(a,b,c):this.writeUInt8(255+a+1,b,c))},d.prototype.writeInt16LE=function(a,b,c){y(this,a,b,!0,c)},d.prototype.writeInt16BE=function(a,b,c){y(this,a,b,!1,c)},d.prototype.writeInt32LE=function(a,b,c){z(this,a,b,!0,c)},d.prototype.writeInt32BE=function(a,b,c){z(this,a,b,!1,c)},d.prototype.writeFloatLE=function(a,b,c){A(this,a,b,!0,c)},d.prototype.writeFloatBE=function(a,b,c){A(this,a,b,!1,c)},d.prototype.writeDoubleLE=function(a,b,c){B(this,a,b,!0,c)},d.prototype.writeDoubleBE=function(a,b,c){B(this,a,b,!1,c)},d.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),"string"==typeof a&&(a=a.charCodeAt(0)),S("number"==typeof a&&!isNaN(a),"value is not a number"),S(c>=b,"end < start"),c!==b&&0!==this.length){S(b>=0&&b<this.length,"start out of bounds"),S(c>=0&&c<=this.length,"end out of bounds");for(var d=b;c>d;d++)this[d]=a}},d.prototype.inspect=function(){for(var a=[],b=this.length,d=0;b>d;d++)if(a[d]=I(this[d]),d===c.INSPECT_MAX_BYTES){a[d+1]="...";break}return"<Buffer "+a.join(" ")+">"},d.prototype.toArrayBuffer=function(){if("function"==typeof Uint8Array){if(d._useTypedArrays)return new d(this).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;c>b;b+=1)a[b]=this[b];return a.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var V=d.prototype},{"base64-js":20,ieee754:21}],20:[function(a,b){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(){"use strict";function a(a){var b=a.charCodeAt(0);return b===g?62:b===h?63:i>b?-1:i+10>b?b-i+26+26:k+26>b?b-k:j+26>b?b-j+26:void 0}function d(b){function c(a){j[l++]=a}var d,e,g,h,i,j;if(b.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=b.length;i="="===b.charAt(k-2)?2:"="===b.charAt(k-1)?1:0,j=new f(3*b.length/4-i),g=i>0?b.length-4:b.length;var l=0;for(d=0,e=0;g>d;d+=4,e+=3)h=a(b.charAt(d))<<18|a(b.charAt(d+1))<<12|a(b.charAt(d+2))<<6|a(b.charAt(d+3)),c((16711680&h)>>16),c((65280&h)>>8),c(255&h);return 2===i?(h=a(b.charAt(d))<<2|a(b.charAt(d+1))>>4,c(255&h)):1===i&&(h=a(b.charAt(d))<<10|a(b.charAt(d+1))<<4|a(b.charAt(d+2))>>2,c(h>>8&255),c(255&h)),j}function e(a){function b(a){return c.charAt(a)}function d(a){return b(a>>18&63)+b(a>>12&63)+b(a>>6&63)+b(63&a)}var e,f,g,h=a.length%3,i="";for(e=0,g=a.length-h;g>e;e+=3)f=(a[e]<<16)+(a[e+1]<<8)+a[e+2],i+=d(f);switch(h){case 1:f=a[a.length-1],i+=b(f>>2),i+=b(f<<4&63),i+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],i+=b(f>>10),i+=b(f>>4&63),i+=b(f<<2&63),i+="="}return i}var f="undefined"!=typeof Uint8Array?Uint8Array:Array,g=("0".charCodeAt(0),"+".charCodeAt(0)),h="/".charCodeAt(0),i="0".charCodeAt(0),j="a".charCodeAt(0),k="A".charCodeAt(0);b.exports.toByteArray=d,b.exports.fromByteArray=e}()},{}],21:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?0/0:1/0*(n?-1:1);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=0>b||0===b&&0>1/b?1:0;for(b=Math.abs(b),isNaN(b)||1/0===b?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}]},{},[3])(3)});